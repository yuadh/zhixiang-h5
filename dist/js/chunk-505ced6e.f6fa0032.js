(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-505ced6e"],{1836:function(t,e,s){},"4b82":function(t,e,s){},"9ed6":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-container"},[e("div",{staticClass:"bg"}),e("div",{staticClass:"bg2"}),t._m(0),e("van-form",{ref:"loginForm",staticClass:"login-form",on:{submit:t.onSubmit}},[e("van-field",{staticClass:"form_input",attrs:{name:"mobile",placeholder:"请输入手机号",rules:t.userFormRules.mobile,type:"number",maxlength:"11"},model:{value:t.user.mobile,callback:function(e){t.$set(t.user,"mobile",e)},expression:"user.mobile"}},[e("Icon",{attrs:{slot:"left-icon",type:"doc-shouji"},slot:"left-icon"})],1),e("van-field",{staticClass:"form_input",attrs:{name:"code",placeholder:"请输入验证码",rules:t.userFormRules.code,type:"number",maxlength:"6"},scopedSlots:t._u([{key:"button",fn:function(){return[t.isCountDownShow?e("van-count-down",{attrs:{time:6e4,format:"ss s"},on:{finish:function(e){t.isCountDownShow=!1}}}):e("van-button",{staticClass:"send-sms-btn",attrs:{"native-type":"button",round:"",size:"small",type:"default"},on:{click:t.onSendSms}},[t._v("发送验证码")])]},proxy:!0}]),model:{value:t.user.code,callback:function(e){t.$set(t.user,"code",e)},expression:"user.code"}},[e("Icon",{attrs:{slot:"left-icon",type:"doc-yanzhengma"},slot:"left-icon"})],1),e("div",{staticClass:"login-btn-wrap"},[e("van-button",{staticClass:"login-btn",attrs:{block:"",type:"info","native-type":"submit"}},[t._v(" 登录 ")])],1)],1)],1)},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"tips"},[e("div",{staticClass:"title"},[t._v("知享园")]),e("div",{staticClass:"subtitle"},[t._v("知识技术分享平台~")])])}],a=(s("14d9"),s("d010")),i=(s("e7e5"),s("d399"));function r(t="加载中.."){i["a"].loading({duration:4e3,message:t,forbidClick:!0})}function c(t="操作成功"){i["a"].success({duration:1e3,message:t,forbidClick:!0})}function u(t="操作失败"){i["a"].fail({duration:1e3,message:t,forbidClick:!0})}var l=s("c24f"),d={name:"LoginIndex",components:{Icon:a["a"]},props:{},data(){return{user:{mobile:"13911111111",code:"246810"},userFormRules:{mobile:[{required:!0,message:"手机号不能为空"},{pattern:/^1[3|5|7|8]\d{9}$/,message:"手机号格式错误"}],code:[{required:!0,message:"验证码不能为空"},{pattern:/^\d{6}$/,message:"验证码格式错误"}]},isCountDownShow:!1}},computed:{},watch:{},created(){},mounted(){},methods:{async onSubmit(t){r("登录中...");try{const{data:t}=await Object(l["f"])(this.user);this.$store.commit("setUser",t.data),c("登录成功"),this.$router.push("/")}catch(e){400===e.response.status?u("手机号或验证码错误"):u("登录失败，请稍后重试")}},async onSendSms(){try{await this.$refs.loginForm.validate("mobile")}catch(t){return console.log("验证失败",t)}this.isCountDownShow=!0;try{await Object(l["g"])(this.user.mobile),c("发送成功")}catch(t){this.isCountDownShow=!1,429===t.response.status?u("发送太频繁了，请稍后重试"):u("发送失败，请稍后重试")}}}},m=d,f=(s("ad89"),s("2877")),b=Object(f["a"])(m,n,o,!1,null,"594f2826",null);e["default"]=b.exports},a8ed:function(t,e,s){"use strict";s("4b82")},ad89:function(t,e,s){"use strict";s("1836")},c24f:function(t,e,s){"use strict";s.d(e,"f",(function(){return o})),s.d(e,"g",(function(){return a})),s.d(e,"d",(function(){return i})),s.d(e,"c",(function(){return r})),s.d(e,"a",(function(){return c})),s.d(e,"b",(function(){return u})),s.d(e,"e",(function(){return l})),s.d(e,"i",(function(){return d})),s.d(e,"h",(function(){return m}));var n=s("0c6d");const o=t=>Object(n["a"])({method:"POST",url:"/v1_0/authorizations",data:t}),a=t=>Object(n["a"])({method:"GET",url:"/v1_0/sms/codes/"+t}),i=()=>Object(n["a"])({method:"GET",url:"/v1_0/user"}),r=()=>Object(n["a"])({method:"GET",url:"/v1_0/user/channels"}),c=t=>Object(n["a"])({method:"POST",url:"/v1_0/user/followings",data:{target:t}}),u=t=>Object(n["a"])({method:"DELETE",url:"/v1_0/user/followings/"+t}),l=t=>Object(n["a"])({method:"GET",url:"/v1_0/user/profile"}),d=t=>Object(n["a"])({method:"PATCH",url:"/v1_0/user/profile",data:t}),m=t=>Object(n["a"])({method:"PATCH",url:"/v1_0/user/photo",data:t})},d010:function(t,e,s){"use strict";var n=function(){var t=this,e=t._self._c;return e("svg",{class:"doc "+t.className,attrs:{"aria-hidden":"true",onclick:t.onClick}},[e("use",{attrs:{"xlink:href":"#"+t.type}})])},o=[],a={name:"icon",props:["type","className","onClick"],data(){return{}},created(){},methods:{},mounted(){},computed:{}},i=a,r=(s("a8ed"),s("2877")),c=Object(r["a"])(i,n,o,!1,null,"34bc6216",null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-505ced6e.f6fa0032.js.map