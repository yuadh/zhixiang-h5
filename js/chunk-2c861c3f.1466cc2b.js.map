{"version":3,"sources":["webpack:///./node_modules/core-js/internals/delete-property-or-throw.js","webpack:///./src/components/like-article/index.vue?c18d","webpack:///./src/views/article/components/comment-item.vue?64be","webpack:///./src/views/article/index.vue","webpack:///./src/components/follow-user/index.vue","webpack:///src/components/follow-user/index.vue","webpack:///./src/components/follow-user/index.vue?6d20","webpack:///./src/components/follow-user/index.vue?5040","webpack:///./src/components/collect-article/index.vue","webpack:///src/components/collect-article/index.vue","webpack:///./src/components/collect-article/index.vue?7be6","webpack:///./src/components/collect-article/index.vue?4c8a","webpack:///./src/components/like-article/index.vue","webpack:///src/components/like-article/index.vue","webpack:///./src/components/like-article/index.vue?32f4","webpack:///./src/components/like-article/index.vue?188e","webpack:///./src/views/article/components/comment-list.vue","webpack:///./src/api/comment.js","webpack:///./src/views/article/components/comment-item.vue","webpack:///src/views/article/components/comment-item.vue","webpack:///./src/views/article/components/comment-item.vue?f04d","webpack:///./src/views/article/components/comment-item.vue?8097","webpack:///src/views/article/components/comment-list.vue","webpack:///./src/views/article/components/comment-list.vue?14d1","webpack:///./src/views/article/components/comment-list.vue?0f11","webpack:///./src/views/article/components/comment-post.vue","webpack:///src/views/article/components/comment-post.vue","webpack:///./src/views/article/components/comment-post.vue?af45","webpack:///./src/views/article/components/comment-post.vue?e7c9","webpack:///./src/views/article/components/comment-reply.vue","webpack:///src/views/article/components/comment-reply.vue","webpack:///./src/views/article/components/comment-reply.vue?83b0","webpack:///./src/views/article/components/comment-reply.vue?1644","webpack:///src/views/article/index.vue","webpack:///./src/views/article/index.vue?9300","webpack:///./src/views/article/index.vue?2b92","webpack:///./src/api/article.js","webpack:///./node_modules/core-js/modules/es.array.unshift.js","webpack:///./src/views/article/index.vue?1ab8","webpack:///./src/components/collect-article/index.vue?1ee1","webpack:///./src/views/article/components/comment-post.vue?71a5","webpack:///./src/api/user.js","webpack:///./src/views/article/components/comment-reply.vue?4ad6"],"names":["tryToString","$TypeError","TypeError","module","exports","O","P","render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","back","loading","_v","article","title","_s","aut_photo","slot","userInfo","intro","_f","pubdate","aut_id","model","value","is_followed","callback","$$v","$set","expression","ref","domProps","content","art_id","commentList","totalCommentCount","total_count","onReplyClick","isPostShow","attitude","is_collected","style","height","onPostSuccess","errStatus","loadArticle","staticStyle","isReplyShow","currentComment","_e","staticRenderFns","isFollowed","onFollow","name","components","prop","event","props","type","required","userId","data","computed","watch","created","mounted","methods","console","message","component","class","collected","onCollect","articleId","liked","status","finished","error","onLoad","_l","list","item","index","key","$emit","getComments","params","request","method","url","addCommentLike","target","deleteCommentLike","addComment","comment","is_liking","commentLoading","onCommentLike","like_count","reply_count","CommentItem","source","default","validator","offset","limit","results","trim","length","onPost","inject","forbidClick","duration","com_id","CommentList","CommentPost","FollowUser","CollectArticle","LikeArticle","CommentReply","provide","followLoading","setTimeout","previewImage","imgs","images","img","startPosition","getArticles","getArticleById","addCollect","deleteCollect","addLike","deleteLike","$","toObject","lengthOfArrayLike","setArrayLength","deletePropertyOrThrow","doesNotExceedSafeInteger","INCORRECT_RESULT","unshift","properErrorOnNonWritableLength","Object","defineProperty","writable","FORCED","proto","arity","forced","len","argCount","arguments","k","to","j","login","sendSms","mobile","getUserInfo","getUserChannels","addFollow","deleteFollow","getUserProfile","updateUserProfile","updateUserPhoto"],"mappings":"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","file":"js/chunk-2c861c3f.1466cc2b.js","sourcesContent":["'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=b3ee9654&prod&scoped=true&lang=less&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-item.vue?vue&type=style&index=0&id=61690c52&prod&scoped=true&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"article-container\"},[_c('van-nav-bar',{staticClass:\"page-nav-bar\",attrs:{\"left-arrow\":\"\",\"title\":\"知享园\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('div',{staticClass:\"main-wrap\"},[(_vm.loading)?_c('div',{staticClass:\"loading-wrap\"},[_c('van-loading',{attrs:{\"color\":\"#3296fa\",\"vertical\":\"\"}},[_vm._v(\"加载中\")])],1):(_vm.article.title)?_c('div',{staticClass:\"article-detail\"},[_c('h1',{staticClass:\"article-title\"},[_vm._v(_vm._s(_vm.article.title))]),_c('van-cell',{staticClass:\"user-info\",attrs:{\"center\":\"\",\"border\":false}},[_c('van-image',{staticClass:\"avatar\",attrs:{\"slot\":\"icon\",\"round\":\"\",\"fit\":\"cover\",\"src\":_vm.article.aut_photo},slot:\"icon\"}),_c('div',{staticClass:\"user-name\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(_vm.userInfo.intro||'知享园用户'))]),_c('div',{staticClass:\"publish-date\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(_vm._s(_vm._f(\"relativeTime\")(_vm.article.pubdate)))]),_c('follow-user',{staticClass:\"follow-btn\",attrs:{\"user-id\":_vm.article.aut_id},model:{value:(_vm.article.is_followed),callback:function ($$v) {_vm.$set(_vm.article, \"is_followed\", $$v)},expression:\"article.is_followed\"}})],1),_c('div',{ref:\"article-content\",staticClass:\"article-content markdown-body\",domProps:{\"innerHTML\":_vm._s(_vm.article.content)}}),_c('van-divider',[_vm._v(\"正文结束\")]),_c('comment-list',{attrs:{\"source\":_vm.article.art_id,\"list\":_vm.commentList},on:{\"onload-success\":function($event){_vm.totalCommentCount = $event.total_count},\"reply-click\":_vm.onReplyClick}}),_c('div',{staticClass:\"article-bottom\"},[_c('van-button',{staticClass:\"comment-btn\",attrs:{\"type\":\"default\",\"round\":\"\",\"size\":\"small\"},on:{\"click\":function($event){_vm.isPostShow = true}}},[_vm._v(\"输入评论..\")]),_c('van-icon',{staticClass:\"comment-icon\",attrs:{\"name\":\"comment-o\",\"info\":_vm.totalCommentCount},on:{\"click\":function($event){_vm.isPostShow=true}}}),_c('like-article',{staticClass:\"btn-item\",attrs:{\"article-id\":_vm.article.art_id},model:{value:(_vm.article.attitude),callback:function ($$v) {_vm.$set(_vm.article, \"attitude\", $$v)},expression:\"article.attitude\"}}),_c('collect-article',{staticClass:\"btn-item\",attrs:{\"article-id\":_vm.article.art_id},model:{value:(_vm.article.is_collected),callback:function ($$v) {_vm.$set(_vm.article, \"is_collected\", $$v)},expression:\"article.is_collected\"}}),_c('van-icon',{attrs:{\"name\":\"share\",\"color\":\"#777777\"}})],1),_c('van-popup',{style:({height:'94%'}),attrs:{\"position\":\"bottom\",\"closeable\":\"\",\"close-icon-position\":\"top-right\"},model:{value:(_vm.isPostShow),callback:function ($$v) {_vm.isPostShow=$$v},expression:\"isPostShow\"}},[_c('comment-post',{attrs:{\"target\":_vm.article.art_id},on:{\"post-success\":_vm.onPostSuccess}})],1)],1):(_vm.errStatus === 404)?_c('div',{staticClass:\"error-wrap\"},[_c('van-icon',{attrs:{\"name\":\"failure\"}}),_c('p',{staticClass:\"text\"},[_vm._v(\"该资源不存在或已删除！\")])],1):_c('div',{staticClass:\"error-wrap\"},[_c('van-icon',{attrs:{\"name\":\"failure\"}}),_c('p',{staticClass:\"text\"},[_vm._v(\"内容加载失败！\")]),_c('van-button',{staticClass:\"retry-btn\",on:{\"click\":_vm.loadArticle}},[_vm._v(\"点击重试\")])],1)]),_c('van-popup',{staticStyle:{\"height\":\"100%\"},attrs:{\"position\":\"bottom\"},model:{value:(_vm.isReplyShow),callback:function ($$v) {_vm.isReplyShow=$$v},expression:\"isReplyShow\"}},[(_vm.isReplyShow)?_c('comment-reply',{attrs:{\"comment\":_vm.currentComment},on:{\"close\":function($event){_vm.isReplyShow = false}}}):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isFollowed)?_c('van-button',{staticClass:\"follow-btn\",attrs:{\"round\":\"\",\"size\":\"small\",\"loading\":_vm.loading},on:{\"click\":_vm.onFollow}},[_vm._v(\"已关注\")]):_c('van-button',{staticClass:\"follow-btn\",attrs:{\"type\":\"info\",\"color\":\"#3296fa\",\"round\":\"\",\"size\":\"small\",\"icon\":\"plus\",\"loading\":_vm.loading},on:{\"click\":_vm.onFollow}},[_vm._v(\"关注\")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <van-button\n    v-if=\"isFollowed\"\n    class=\"follow-btn\"\n    round\n    size=\"small\"\n    :loading=\"loading\"\n    @click=\"onFollow\"\n  >已关注</van-button>\n  <van-button\n    v-else\n    class=\"follow-btn\"\n    type=\"info\"\n    color=\"#3296fa\"\n    round\n    size=\"small\"\n    icon=\"plus\"\n    :loading=\"loading\"\n    @click=\"onFollow\"\n  >关注</van-button>\n</template>\n\n<script>\nimport { addFollow, deleteFollow } from '@/api/user'\n\nexport default {\n  name: 'FollowUser',\n  components: {},\n  // 自定义 v-model 的数据名称\n  model: {\n    prop: 'isFollowed', // 默认是 value\n    event: 'update-is_followed' // 默认是 input\n  },\n  props: {\n    isFollowed: {\n      type: Boolean,\n      required: true\n    },\n    userId: {\n      type: [Number, String, Object],\n      required: true\n    }\n  },\n  data () {\n    return {\n      loading: false\n    }\n  },\n  computed: {},\n  watch: {},\n  created () {},\n  mounted () {},\n  methods: {\n    async onFollow () {\n      this.loading = true // 展示关注按钮的 loading 状态\n      try {\n        if (this.isFollowed) {\n          // 已关注，取消关注\n          await deleteFollow(this.userId)\n          // this.article.is_followed = false\n        } else {\n          // 没有关注，添加关注\n          await addFollow(this.userId)\n          // this.article.is_followed = true\n        }\n\n        // 更新视图状态\n        // this.article.is_followed = !this.article.is_followed\n        this.$emit('update-is_followed', !this.isFollowed)\n        // this.$emit('input', !this.value)\n        // this.$emit('update-is_followed', !this.value)\n      } catch (err) {\n        console.log(err)\n        let message = '操作失败，请重试！'\n        if (err.response && err.response.status === 400) {\n          message = '你不能关注你自己！'\n        }\n        this.$toast(message)\n      }\n      this.loading = false // 关闭关注按钮的 loading 状态\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\"></style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3e61ddc4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e61ddc4\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('van-button',{class:{\n    collected: _vm.value\n  },attrs:{\"icon\":_vm.value ? 'star' : 'star-o',\"loading\":_vm.loading},on:{\"click\":_vm.onCollect}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <van-button\n    :icon=\"value ? 'star' : 'star-o'\"\n    :class=\"{\n      collected: value\n    }\"\n    :loading=\"loading\"\n    @click=\"onCollect\"\n  />\n</template>\n\n<script>\nimport { addCollect, deleteCollect } from '@/api/article'\n\nexport default {\n  name: 'CollectArticle',\n  components: {},\n  props: {\n    value: {\n      type: Boolean,\n      required: true\n    },\n    articleId: {\n      type: [Number, String, Object],\n      required: true\n    }\n  },\n  data () {\n    return {\n      loading: false\n    }\n  },\n  computed: {},\n  watch: {},\n  created () {},\n  mounted () {},\n  methods: {\n    async onCollect () {\n      this.loading = true\n      try {\n        if (this.value) {\n          // 已收藏，取消收藏\n          await deleteCollect(this.articleId)\n        } else {\n          // 没有收藏，添加收藏\n          await addCollect(this.articleId)\n        }\n\n        // 更新视图\n        // 自定义事件修改数据并不是立即的\n        this.$emit('input', !this.value)\n\n        this.$toast.success(!this.value ? '收藏成功' : '取消收藏')\n      } catch (err) {\n        this.$toast.fail('操作失败，请重试！')\n      }\n      this.loading = false\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.collected {\n  .van-icon {\n    color: #ffa500;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=d2033be8&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=d2033be8&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d2033be8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('van-button',{class:{\n    liked: _vm.value === 1\n  },attrs:{\"icon\":_vm.value === 1 ? 'good-job' : 'good-job-o',\"loading\":_vm.loading},on:{\"click\":_vm.onCollect}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <van-button\n    :icon=\"value === 1 ? 'good-job' : 'good-job-o'\"\n    :class=\"{\n      liked: value === 1\n    }\"\n    :loading=\"loading\"\n    @click=\"onCollect\"\n  />\n</template>\n\n<script>\nimport { addLike, deleteLike } from '@/api/article'\n\nexport default {\n  name: 'LikeArticle',\n  components: {},\n  props: {\n    value: {\n      type: Number,\n      required: true\n    },\n    articleId: {\n      type: [Number, String, Object],\n      required: true\n    }\n  },\n  data () {\n    return {\n      loading: false\n    }\n  },\n  computed: {},\n  watch: {},\n  created () {},\n  mounted () {},\n  methods: {\n    async onCollect () {\n      this.loading = true\n      try {\n        let status = -1\n        if (this.value === 1) {\n          // 已点赞，取消点赞\n          await deleteLike(this.articleId)\n        } else {\n          // 没有点赞，添加点赞\n          await addLike(this.articleId)\n          status = 1\n        }\n\n        // 更新视图\n        this.$emit('input', status)\n        this.$toast.success(status === 1 ? '点赞成功' : '取消点赞')\n      } catch (err) {\n        console.log(err)\n        this.$toast.fail('操作失败，请重试！')\n      }\n      this.loading = false\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.liked {\n  .van-icon {\n    color: #e5645f;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b3ee9654&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=b3ee9654&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b3ee9654\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"已显示全部评论\",\"error\":_vm.error,\"error-text\":\"加载失败，请点击重试\",\"immediate-check\":false},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item,index){return _c('comment-item',{key:index,attrs:{\"comment\":item},on:{\"reply-click\":function($event){return _vm.$emit('reply-click', $event)}}})}),1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/api/request'\r\n/**\r\n * 获取文章评论列表\r\n */\r\nexport const getComments = params => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/comments',\r\n    // GET 参数使用 params 进行传递\r\n    // 我们写的时候是对象，但是最终发给后端的数据是？\r\n    // axios 会把 params 对象转为 key=value?key=value 的格式放到 url 中发送\r\n    params\r\n  })\r\n}\r\n\r\n/**\r\n   * 评论点赞\r\n   */\r\nexport const addCommentLike = target => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/v1_0/comment/likings',\r\n    data: {\r\n      target\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n   * 取消评论点赞\r\n   */\r\nexport const deleteCommentLike = target => {\r\n  return request({\r\n    method: 'DELETE',\r\n    url: `/v1_0/comment/likings/${target}`\r\n  })\r\n}\r\n\r\n/**\r\n   * 发布文章评论或评论回复\r\n   */\r\nexport const addComment = data => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/v1_0/comments',\r\n    data\r\n  })\r\n}\r\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('van-cell',{staticClass:\"comment-item\"},[_c('van-image',{staticClass:\"avatar\",attrs:{\"slot\":\"icon\",\"round\":\"\",\"fit\":\"cover\",\"src\":_vm.comment.aut_photo},slot:\"icon\"}),_c('div',{staticClass:\"title-wrap\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('div',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm.userInfo.intro||'知享园用户'))]),_c('van-button',{staticClass:\"like-btn\",class:{\n        liked: _vm.comment.is_liking\n      },attrs:{\"icon\":_vm.comment.is_liking ? 'good-job' : 'good-job-o',\"loading\":_vm.commentLoading},on:{\"click\":_vm.onCommentLike}},[_vm._v(_vm._s(_vm.comment.like_count || '赞'))])],1),_c('div',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('p',{staticClass:\"comment-content\"},[_vm._v(_vm._s(_vm.comment.content))]),_c('div',{staticClass:\"bottom-info\"},[_c('span',{staticClass:\"comment-pubdate\"},[_vm._v(_vm._s(_vm._f(\"relativeTime\")(_vm.comment.pubdate)))]),_c('van-button',{staticClass:\"reply-btn\",attrs:{\"round\":\"\"},on:{\"click\":function($event){return _vm.$emit('reply-click', _vm.comment)}}},[_vm._v(\"回复 \"+_vm._s(_vm.comment.reply_count))])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <van-cell class=\"comment-item\">\n    <van-image\n      slot=\"icon\"\n      class=\"avatar\"\n      round\n      fit=\"cover\"\n      :src=\"comment.aut_photo\"\n    />\n    <div slot=\"title\" class=\"title-wrap\">\n      <div class=\"user-name\">{{ userInfo.intro||'知享园用户' }}</div>\n      <van-button\n        class=\"like-btn\"\n        :class=\"{\n          liked: comment.is_liking\n        }\"\n        :icon=\"comment.is_liking ? 'good-job' : 'good-job-o'\"\n        :loading=\"commentLoading\"\n        @click=\"onCommentLike\"\n      >{{ comment.like_count || '赞' }}</van-button>\n    </div>\n\n    <div slot=\"label\">\n      <p class=\"comment-content\">{{ comment.content }}</p>\n      <div class=\"bottom-info\">\n        <span class=\"comment-pubdate\">{{ comment.pubdate | relativeTime }}</span>\n        <van-button\n          class=\"reply-btn\"\n          round\n          @click=\"$emit('reply-click', comment)\"\n        >回复 {{ comment.reply_count }}</van-button>\n      </div>\n    </div>\n  </van-cell>\n</template>\n\n<script>\nimport { addCommentLike, deleteCommentLike } from '@/api/comment'\nimport { mapState } from 'vuex'\nexport default {\n  name: 'CommentItem',\n  components: {},\n  props: {\n    comment: {\n      type: Object,\n      required: true\n    }\n  },\n  data () {\n    return {\n      commentLoading: false\n    }\n  },\n  computed: {\n    ...mapState(['userInfo'])\n  },\n  watch: {},\n  created () {},\n  mounted () {},\n  methods: {\n    async onCommentLike () {\n      this.commentLoading = true\n      try {\n        if (this.comment.is_liking) {\n          // 已赞，取消点赞\n          await deleteCommentLike(this.comment.com_id)\n          this.comment.like_count--\n        } else {\n          // 没有点赞，添加点赞\n          await addCommentLike(this.comment.com_id)\n          this.comment.like_count++\n        }\n        this.comment.is_liking = !this.comment.is_liking\n      } catch (err) {\n        this.$toast('操作失败，请重试')\n      }\n      this.commentLoading = false\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.comment-item {\n  .avatar {\n    width: 72px;\n    height: 72px;\n    margin-right: 25px;\n  }\n  .title-wrap {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .user-name {\n      color: #406599;\n      font-size: 26px;\n    }\n  }\n  .comment-content {\n    font-size: 32px;\n    color: #222222;\n    word-break: break-all;\n    text-align: justify;\n  }\n  .comment-pubdate {\n    font-size: 19px;\n    color: #222;\n    margin-right: 25px;\n  }\n  .bottom-info {\n    display: flex;\n    align-items: center;\n  }\n  .reply-btn {\n    // width: 135px;\n    height: 48px;\n    line-height: 48px;\n    font-size: 21px;\n    color: #222;\n  }\n  .like-btn {\n    height: 30px;\n    padding: 0;\n    border: none;\n    font-size: 19px;\n    line-height: 30px;\n    margin-right: 7px;\n    .van-icon {\n      font-size: 30px;\n    }\n    &.liked {\n      color: #e5645f;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-item.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comment-item.vue?vue&type=template&id=61690c52&scoped=true&\"\nimport script from \"./comment-item.vue?vue&type=script&lang=js&\"\nexport * from \"./comment-item.vue?vue&type=script&lang=js&\"\nimport style0 from \"./comment-item.vue?vue&type=style&index=0&id=61690c52&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61690c52\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <!--\n    只有 List 在可视范围内才会检查滚动位置触发 onLoad\n   -->\n  <van-list\n    v-model=\"loading\"\n    :finished=\"finished\"\n    finished-text=\"已显示全部评论\"\n    :error=\"error\"\n    error-text=\"加载失败，请点击重试\"\n    :immediate-check=\"false\"\n    @load=\"onLoad\"\n  >\n    <comment-item\n      v-for=\"(item, index) in list\"\n      :key=\"index\"\n      :comment=\"item\"\n      @reply-click=\"$emit('reply-click', $event)\"\n    />\n  </van-list>\n</template>\n\n<script>\nimport { getComments } from '@/api/comment'\nimport CommentItem from './comment-item'\n\nexport default {\n  name: 'CommentList',\n  components: {\n    CommentItem\n  },\n  props: {\n    source: {\n      type: [Number, String, Object],\n      required: true\n    },\n    list: {\n      type: Array,\n      default: () => []\n    },\n    type: {\n      type: String,\n      // 自定义 Prop 数据验证\n      validator (value) {\n        return ['a', 'c'].includes(value)\n      },\n      default: 'a'\n    }\n  },\n  data () {\n    return {\n      // list: [],\n      loading: false,\n      finished: false,\n      offset: null, // 获取下一页数据的标记\n      limit: 10,\n      error: false\n    }\n  },\n  computed: {},\n  watch: {},\n  created () {\n    // 当你手动初始 onLoad 的话，它不会自动开始初始的 loading\n    // 所以我们要手动的开启初始 loading\n    this.loading = true\n    this.onLoad()\n  },\n  mounted () {},\n  methods: {\n    async onLoad () {\n      try {\n        // 获取文章的评论和获取评论的回复是同一个接口\n        // 唯一的区别是接口参数不一样\n        //    type\n        //      a 文章的评论\n        //      c 评论的回复\n        //    source\n        //      文章的评论，则传递文章的 ID\n        //      评论的回复，则传递评论的 ID\n        // 1. 请求获取数据\n        const { data } = await getComments({\n          type: this.type, //  评论类型，a-对文章(article)的评论，c-对评论(comment)的回复\n          source: this.source.toString(), // 源id，文章id或评论id\n          offset: this.offset, // 获取评论数据的偏移量，值为评论id，表示从此id的数据向后取，不传表示从第一页开始读取数据\n          limit: this.limit // 获取的评论数据个数，不传表示采用后端服务设定的默认每页数据量\n        })\n\n        // 2. 将数据添加到列表中\n        const { results } = data.data\n        this.list.push(...results)\n\n        // 把文章评论的总数量传递到外部\n        this.$emit('onload-success', data.data)\n\n        // 3. 将 loading 设置为 false\n        this.loading = false\n\n        // 4. 判断是否还有数据\n        if (results.length) {\n          // 有就更新获取下一页的数据页码\n          this.offset = data.data.last_id\n        } else {\n          // 没有就将 finished 设置结束\n          this.finished = true\n        }\n      } catch (err) {\n        this.error = true\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\"></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comment-list.vue?vue&type=template&id=825e9c54&scoped=true&\"\nimport script from \"./comment-list.vue?vue&type=script&lang=js&\"\nexport * from \"./comment-list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"825e9c54\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"comment-post\"},[_c('van-field',{staticClass:\"post-field\",attrs:{\"rows\":\"2\",\"autosize\":\"\",\"type\":\"textarea\",\"maxlength\":\"50\",\"placeholder\":\"请输入评论\",\"show-word-limit\":\"\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"message\"}}),_c('van-button',{staticClass:\"post-btn\",attrs:{\"disabled\":!_vm.message.length},on:{\"click\":_vm.onPost}},[_vm._v(\"发布\")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"comment-post\">\n    <van-field\n      class=\"post-field\"\n      v-model.trim=\"message\"\n      rows=\"2\"\n      autosize\n      type=\"textarea\"\n      maxlength=\"50\"\n      placeholder=\"请输入评论\"\n      show-word-limit\n    />\n    <van-button\n      class=\"post-btn\"\n      @click=\"onPost\"\n      :disabled=\"!message.length\"\n    >发布</van-button>\n  </div>\n</template>\n\n<script>\nimport { addComment } from '@/api/comment'\n\nexport default {\n  name: 'CommentPost',\n  components: {},\n  inject: {\n    articleId: {\n      type: [Number, String, Object],\n      default: null\n    }\n  },\n  props: {\n    target: {\n      type: [Number, String, Object],\n      required: true\n    }\n  },\n  data () {\n    return {\n      message: ''\n    }\n  },\n  computed: {},\n  watch: {},\n  created () {},\n  mounted () {},\n  methods: {\n    async onPost () {\n      this.$toast.loading({\n        message: '发布中...',\n        forbidClick: true, // 禁用背景点击\n        duration: 0 // 持续时间，默认 2000，0 表示持续展示不关闭\n      })\n\n      try {\n        const { data } = await addComment({\n          target: this.target.toString(), // 评论的目标id（评论文章即为文章id，对评论进行回复则为评论id）\n          content: this.message, // 评论内容\n          art_id: this.articleId ? this.articleId.toString() : this.articleId // 文章id，对评论内容发表回复时，需要传递此参数，表明所属文章id。对文章进行评论，不要传此参数。\n        })\n\n        // 关闭弹出层\n        // 将发布内容显示到列表顶部\n        // 清空文本框\n        this.message = ''\n        this.$emit('post-success', data.data)\n\n        this.$toast.success('发布成功')\n      } catch (err) {\n        this.$toast.fail('发布失败')\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.comment-post {\n  margin-top: 50px;\n  display: flex;\n  align-items: center;\n  padding: 32px 0 32px 32px;\n  .post-field {\n    background-color: #f5f7f9;\n  }\n  .post-btn {\n    width: 150px;\n    border: none;\n    padding: 0;\n    color: #6ba3d8;\n    &::before {\n      display: none;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-post.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-post.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comment-post.vue?vue&type=template&id=66896603&scoped=true&\"\nimport script from \"./comment-post.vue?vue&type=script&lang=js&\"\nexport * from \"./comment-post.vue?vue&type=script&lang=js&\"\nimport style0 from \"./comment-post.vue?vue&type=style&index=0&id=66896603&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"66896603\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"comment-reply\"},[_c('van-nav-bar',{attrs:{\"title\":_vm.comment.reply_count > 0 ? `${_vm.comment.reply_count}条回复` : '暂无回复'}},[_c('van-icon',{attrs:{\"slot\":\"left\",\"name\":\"cross\"},on:{\"click\":function($event){return _vm.$emit('close')}},slot:\"left\"})],1),_c('div',{staticClass:\"scroll-wrap\"},[_c('comment-item',{attrs:{\"comment\":_vm.comment}}),_c('van-cell',{attrs:{\"title\":\"全部回复\"}}),_c('comment-list',{attrs:{\"list\":_vm.commentList,\"source\":_vm.comment.com_id,\"type\":\"c\"}})],1),_c('div',{staticClass:\"reply-bottom\"},[_c('van-button',{staticClass:\"write-btn\",attrs:{\"size\":\"small\",\"round\":\"\"},on:{\"click\":function($event){_vm.isPostShow = true}}},[_vm._v(\"写评论\")])],1),_c('van-popup',{style:({height:'95%'}),attrs:{\"closeable\":\"\",\"close-icon-position\":\"top-right\",\"position\":\"bottom\"},model:{value:(_vm.isPostShow),callback:function ($$v) {_vm.isPostShow=$$v},expression:\"isPostShow\"}},[_c('comment-post',{attrs:{\"target\":_vm.comment.com_id},on:{\"post-success\":_vm.onPostSuccess}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"comment-reply\">\n    <van-nav-bar\n      :title=\"comment.reply_count > 0 ? `${comment.reply_count}条回复` : '暂无回复'\"\n    >\n      <van-icon\n        slot=\"left\"\n        name=\"cross\"\n        @click=\"$emit('close')\"\n      />\n    </van-nav-bar>\n\n    <div class=\"scroll-wrap\">\n      <!-- 当前评论项 -->\n      <comment-item :comment=\"comment\" />\n      <!-- /当前评论项 -->\n\n      <!-- 评论的回复列表 -->\n      <van-cell title=\"全部回复\" />\n      <comment-list\n        :list=\"commentList\"\n        :source=\"comment.com_id\"\n        type=\"c\"\n      />\n      <!-- /评论的回复列表 -->\n    </div>\n\n    <!-- 底部区域 -->\n    <div class=\"reply-bottom\">\n      <van-button\n        class=\"write-btn\"\n        size=\"small\"\n        round\n        @click=\"isPostShow = true\"\n      >写评论</van-button>\n    </div>\n    <!-- /底部区域 -->\n\n    <!-- 发布评论 -->\n    <van-popup\n     closeable\n     close-icon-position=\"top-right\"\n     :style=\"{height:'95%'}\"\n     v-model=\"isPostShow\"\n     position=\"bottom\">\n      <comment-post\n        :target=\"comment.com_id\"\n        @post-success=\"onPostSuccess\"\n      />\n    </van-popup>\n    <!-- /发布评论 -->\n  </div>\n</template>\n\n<script>\nimport CommentItem from './comment-item'\nimport CommentList from './comment-list'\nimport CommentPost from './comment-post'\n\nexport default {\n  name: 'CommentReply',\n  components: {\n    CommentItem,\n    CommentList,\n    CommentPost\n  },\n  props: {\n    comment: {\n      type: Object,\n      required: true\n    }\n  },\n  data () {\n    return {\n      isPostShow: false,\n      commentList: [] // 评论的回复列表\n    }\n  },\n  computed: {},\n  watch: {},\n  created () {},\n  mounted () {},\n  methods: {\n    onPostSuccess (data) {\n      // 更新回复的数量\n      this.comment.reply_count++\n\n      // 关闭弹层\n      this.isPostShow = false\n\n      // 将最新回复的内容展示到列表的顶部\n      this.commentList.unshift(data.new_obj)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.scroll-wrap {\n  position: fixed;\n  top: 92px;\n  left: 0;\n  right: 0;\n  bottom: 88px;\n  overflow-y: auto;\n}\n\n.reply-bottom {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 88px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #fff;\n  border-top: 1px solid #d8d8d8;\n  .write-btn {\n    width: 60%;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-reply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-reply.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comment-reply.vue?vue&type=template&id=fc7ee0b6&scoped=true&\"\nimport script from \"./comment-reply.vue?vue&type=script&lang=js&\"\nexport * from \"./comment-reply.vue?vue&type=script&lang=js&\"\nimport style0 from \"./comment-reply.vue?vue&type=style&index=0&id=fc7ee0b6&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fc7ee0b6\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"article-container\">\r\n    <!-- 导航栏 -->\r\n    <van-nav-bar\r\n      class=\"page-nav-bar\"\r\n      left-arrow\r\n      title=\"知享园\"\r\n      @click-left=\"$router.back()\"\r\n    ></van-nav-bar>\r\n    <!-- /导航栏 -->\r\n    <div class=\"main-wrap\">\r\n      <!-- 加载中 -->\r\n      <div v-if=\"loading\" class=\"loading-wrap\">\r\n        <van-loading\r\n          color=\"#3296fa\"\r\n          vertical\r\n        >加载中</van-loading>\r\n      </div>\r\n      <!-- /加载中 -->\r\n      <!-- 加载完成-文章详情 -->\r\n      <div v-else-if=\"article.title\" class=\"article-detail\">\r\n        <!-- 文章标题 -->\r\n        <h1 class=\"article-title\">{{ article.title }}</h1>\r\n        <!-- /文章标题 -->\r\n        <!-- 用户信息 -->\r\n        <van-cell class=\"user-info\" center :border=\"false\">\r\n          <van-image\r\n            class=\"avatar\"\r\n            slot=\"icon\"\r\n            round\r\n            fit=\"cover\"\r\n            :src=\"article.aut_photo\"\r\n          />\r\n          <div slot=\"title\" class=\"user-name\">{{ userInfo.intro||'知享园用户' }}</div>\r\n          <div slot=\"label\" class=\"publish-date\">{{ article.pubdate | relativeTime }}</div>\r\n          <!--\r\n            模板中的 $event 是事件参数\r\n            当我们传递给子组件的数据既要使用还要修改。\r\n              传递：props\r\n                :is-followed=\"article.is_followed\"\r\n              修改：自定义事件\r\n                @update-is_followed=\"article.is_followed = $event\"\r\n            简写方式：在组件上使用 v-model\r\n              value=\"article.is_followed\"\r\n              @input=\"article.is_followed = $event\"\r\n            如果需要修改 v-model 的规则名称，可以通过子组件的 model 属性来配置修改\r\n            一个组件上只能使用一次 v-model，\r\n            如果有多个数据需要实现类似于 v-model 的效果，咋办？\r\n            可以使用属性的 .sync 修饰符。\r\n           -->\r\n          <follow-user\r\n            class=\"follow-btn\"\r\n            v-model=\"article.is_followed\"\r\n            :user-id=\"article.aut_id\"\r\n          />\r\n          <!-- <van-button\r\n            v-if=\"article.is_followed\"\r\n            class=\"follow-btn\"\r\n            round\r\n            size=\"small\"\r\n            :loading=\"followLoading\"\r\n            @click=\"onFollow\"\r\n          >已关注</van-button>\r\n          <van-button\r\n            v-else\r\n            class=\"follow-btn\"\r\n            type=\"info\"\r\n            color=\"#3296fa\"\r\n            round\r\n            size=\"small\"\r\n            icon=\"plus\"\r\n            :loading=\"followLoading\"\r\n            @click=\"onFollow\"\r\n          >关注</van-button> -->\r\n        </van-cell>\r\n        <!-- /用户信息 -->\r\n        <!-- 文章内容 -->\r\n        <div\r\n          class=\"article-content markdown-body\"\r\n          v-html=\"article.content\"\r\n          ref=\"article-content\"\r\n        ></div>\r\n        <van-divider>正文结束</van-divider>\r\n        <!-- 文章评论列表 -->\r\n        <comment-list\r\n          :source=\"article.art_id\"\r\n          :list=\"commentList\"\r\n          @onload-success=\"totalCommentCount = $event.total_count\"\r\n          @reply-click=\"onReplyClick\"\r\n        />\r\n        <!-- /文章评论列表 -->\r\n        <!-- 底部区域 -->\r\n        <div class=\"article-bottom\">\r\n          <van-button\r\n            class=\"comment-btn\"\r\n            type=\"default\"\r\n            round\r\n            size=\"small\"\r\n            @click=\"isPostShow = true\"\r\n          >输入评论..</van-button>\r\n          <van-icon\r\n            class=\"comment-icon\"\r\n            name=\"comment-o\"\r\n            @click=\"isPostShow=true\"\r\n            :info=\"totalCommentCount\"\r\n          />\r\n          <like-article\r\n            class=\"btn-item\"\r\n            v-model=\"article.attitude\"\r\n            :article-id=\"article.art_id\"\r\n          />\r\n          <collect-article\r\n           class=\"btn-item\"\r\n           v-model=\"article.is_collected\"\r\n           :article-id=\"article.art_id\"\r\n           />\r\n          <van-icon name=\"share\" color=\"#777777\"></van-icon>\r\n        </div>\r\n        <!-- /底部区域 -->\r\n        <!-- 发布评论 -->\r\n        <van-popup\r\n          v-model=\"isPostShow\"\r\n          position=\"bottom\"\r\n          closeable\r\n          close-icon-position=\"top-right\"\r\n          :style=\"{height:'94%'}\"\r\n        >\r\n          <comment-post\r\n            :target=\"article.art_id\"\r\n            @post-success=\"onPostSuccess\"\r\n          />\r\n        </van-popup>\r\n        <!-- 发布评论 -->\r\n      </div>\r\n      <!-- /加载完成-文章详情 -->\r\n      <!-- 加载失败：404 -->\r\n      <div v-else-if=\"errStatus === 404\" class=\"error-wrap\">\r\n        <van-icon name=\"failure\" />\r\n        <p class=\"text\">该资源不存在或已删除！</p>\r\n      </div>\r\n      <!-- /加载失败：404 -->\r\n      <!-- 加载失败：其它未知错误（例如网络原因或服务端异常） -->\r\n      <div v-else class=\"error-wrap\">\r\n        <van-icon name=\"failure\" />\r\n        <p class=\"text\">内容加载失败！</p>\r\n        <van-button\r\n          class=\"retry-btn\"\r\n          @click=\"loadArticle\"\r\n        >点击重试</van-button>\r\n      </div>\r\n      <!-- /加载失败：其它未知错误（例如网络原因或服务端异常） -->\r\n    </div>\r\n    <!-- 评论回复 -->\r\n    <!--\r\n      弹出层是懒渲染的：只有在第一次展示的时候才会渲染里面的内容，之后它的关闭和显示都是在切换内容的显示和隐藏\r\n     -->\r\n    <van-popup\r\n      v-model=\"isReplyShow\"\r\n      position=\"bottom\"\r\n      style=\"height: 100%;\"\r\n    >\r\n      <!--\r\n        v-if 条件渲染\r\n          true：渲染元素节点\r\n          false：不渲染\r\n       -->\r\n      <comment-reply\r\n        v-if=\"isReplyShow\"\r\n        :comment=\"currentComment\"\r\n        @close=\"isReplyShow = false\"\r\n      />\r\n    </van-popup>\r\n    <!-- /评论回复 -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getArticleById } from '@/api/article'\r\nimport { ImagePreview } from 'vant'\r\nimport FollowUser from '@/components/follow-user'\r\nimport CollectArticle from '@/components/collect-article'\r\nimport LikeArticle from '@/components/like-article'\r\nimport CommentList from './components/comment-list'\r\nimport CommentPost from './components/comment-post'\r\nimport CommentReply from './components/comment-reply'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  name: 'ArticleIndex',\r\n  components: {\r\n    FollowUser,\r\n    CollectArticle,\r\n    LikeArticle,\r\n    CommentList,\r\n    CommentPost,\r\n    CommentReply\r\n  },\r\n  // 给所有的后代组件提供数据\r\n  // 注意：不要滥用\r\n  provide: function () {\r\n    return {\r\n      articleId: this.articleId\r\n    }\r\n  },\r\n  props: {\r\n    articleId: {\r\n      type: [Number, String, Object],\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      article: {}, // 文章详情\r\n      loading: true, // 加载中的 loading 状态\r\n      errStatus: 0, // 失败的状态码\r\n      followLoading: false,\r\n      totalCommentCount: 0,\r\n      isPostShow: false, // 控制发布评论的显示状态\r\n      commentList: [], // 评论列表\r\n      isReplyShow: false,\r\n      currentComment: {} // 当前点击回复的评论项\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['userInfo'])\r\n  },\r\n  watch: {},\r\n  created () {\r\n    this.loadArticle()\r\n  },\r\n  mounted () {},\r\n  methods: {\r\n    async loadArticle () {\r\n    // 展示 loading 加载中\r\n      this.loading = true\r\n      try {\r\n        const { data } = await getArticleById(this.articleId)\r\n        // if (Math.random() > 0.5) {\r\n        //   JSON.parse('dsankljdnskaljndlkjsa')\r\n        // }\r\n        // 数据驱动视图这件事儿不是立即的\r\n        this.article = data.data\r\n        // 初始化图片点击预览\r\n        // console.log(this.$refs['article-content'])\r\n        setTimeout(() => {\r\n          this.previewImage()\r\n        }, 0)\r\n      // 请求成功，关闭 loading\r\n      // this.loading = false\r\n      } catch (err) {\r\n        if (err.response && err.response.status === 404) {\r\n          this.errStatus = 404\r\n        }\r\n      // this.loading = false\r\n      // console.log('获取数据失败', err)\r\n      }\r\n      // 无论成功还是失败，都需要关闭 loading\r\n      this.loading = false\r\n    },\r\n    previewImage () {\r\n    // 得到所有的 img 节点\r\n      const articleContent = this.$refs['article-content']\r\n      const imgs = articleContent.querySelectorAll('img')\r\n      // 获取所有 img 地址\r\n      const images = []\r\n      imgs.forEach((img, index) => {\r\n        images.push(img.src)\r\n        // 给每个 img 注册点击事件，在处理函数中调用预览\r\n        img.onclick = () => {\r\n          ImagePreview({\r\n          // 预览的图片地址数组\r\n            images,\r\n            // 起始位置，从 0 开始\r\n            startPosition: index\r\n          })\r\n        }\r\n      })\r\n    },\r\n    onPostSuccess (data) {\r\n    // 关闭弹出层\r\n      this.isPostShow = false\r\n      // 将发布内容显示到列表顶部\r\n      this.commentList.unshift(data.new_obj)\r\n      this.totalCommentCount = this.totalCommentCount + 1\r\n    },\r\n    onReplyClick (comment) {\r\n      this.currentComment = comment\r\n      // 显示评论回复弹出层\r\n      this.isReplyShow = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n@import \"./github-markdown.css\";\r\n.article-container {\r\n  .main-wrap {\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    background-color: #fff;\r\n  }\r\n  .article-detail {\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    top: 92px;\r\n    bottom: 88px;\r\n    overflow-y: scroll;\r\n    background-color: #fff;\r\n    .article-title {\r\n      font-size: 40px;\r\n      padding: 50px 32px;\r\n      margin: 0;\r\n      color: #3a3a3a;\r\n    }\r\n    .user-info {\r\n      padding: 0 32px;\r\n      .avatar {\r\n        width: 70px;\r\n        height: 70px;\r\n        margin-right: 17px;\r\n      }\r\n      .van-cell__label {\r\n        margin-top: 0;\r\n      }\r\n      .user-name {\r\n        font-size: 24px;\r\n        color: #3a3a3a;\r\n      }\r\n      .publish-date {\r\n        font-size: 23px;\r\n        color: #b7b7b7;\r\n      }\r\n      .follow-btn {\r\n        width: 170px;\r\n        height: 58px;\r\n      }\r\n    }\r\n    .article-content {\r\n      padding: 55px 32px;\r\n      /deep/ p {\r\n        text-align: justify;\r\n      }\r\n    }\r\n  }\r\n  .loading-wrap {\r\n    padding: 200px 32px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background-color: #fff;\r\n  }\r\n  .error-wrap {\r\n    padding: 200px 32px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background-color: #fff;\r\n    .van-icon {\r\n      font-size: 122px;\r\n      color: #b4b4b4;\r\n    }\r\n    .text {\r\n      font-size: 30px;\r\n      color: #666666;\r\n      margin: 33px 0 46px;\r\n    }\r\n    .retry-btn {\r\n      width: 280px;\r\n      height: 70px;\r\n      line-height: 70px;\r\n      border: 1px solid #c3c3c3;\r\n      font-size: 30px;\r\n      color: #666666;\r\n    }\r\n  }\r\n  .article-bottom {\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    box-sizing: border-box;\r\n    height: 88px;\r\n    border-top: 1px solid #d8d8d8;\r\n    background-color: #fff;\r\n    .comment-btn {\r\n      width: 282px;\r\n      height: 46px;\r\n      border: 2px solid #eeeeee;\r\n      font-size: 30px;\r\n      line-height: 46px;\r\n      color: #a7a7a7;\r\n    }\r\n    /deep/ .van-icon {\r\n      font-size: 40px;\r\n    }\r\n    .comment-icon {\r\n      top: 2px;\r\n      color: #777;\r\n      .van-info {\r\n        font-size: 16px;\r\n        background-color: #e22829;\r\n      }\r\n    }\r\n    .btn-item {\r\n      border: none;\r\n      padding: 0;\r\n      height: 40px;\r\n      line-height: 40px;\r\n      color: #777777\r\n    }\r\n    .collect-btn--collected {\r\n      color: #ffa500;\r\n    }\r\n    .like-btn--liked {\r\n      color: #e5645f;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=498a5d93&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=498a5d93&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"498a5d93\",\n  null\n  \n)\n\nexport default component.exports","/**\r\n * 文章请求模块\r\n */\r\nimport request from '@/api/request'\r\n\r\n/**\r\n * 获取文章列表\r\n */\r\nexport const getArticles = params => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/articles',\r\n    // params 选项用来配置 Query 参数\r\n    params\r\n  })\r\n}\r\n\r\n/**\r\n * 获取文章\r\n */\r\nexport const getArticleById = articleId => {\r\n  return request({\r\n    method: 'GET',\r\n    url: `/v1_0/articles/${articleId}`\r\n  })\r\n}\r\n\r\n/**\r\n * 收藏文章\r\n */\r\nexport const addCollect = target => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/v1_0/article/collections',\r\n    data: {\r\n      target\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 取消收藏文章\r\n */\r\nexport const deleteCollect = target => {\r\n  return request({\r\n    method: 'DELETE',\r\n    url: `/v1_0/article/collections/${target}`\r\n  })\r\n}\r\n\r\n/**\r\n * 点赞文章\r\n */\r\nexport const addLike = target => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/v1_0/article/likings',\r\n    data: {\r\n      target\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 取消点赞文章\r\n */\r\nexport const deleteLike = target => {\r\n  return request({\r\n    method: 'DELETE',\r\n    url: `/v1_0/article/likings/${target}`\r\n  })\r\n}\r\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_RESULT || !properErrorOnNonWritableLength();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return setArrayLength(O, len + argCount);\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=498a5d93&prod&scoped=true&lang=less&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=d2033be8&prod&scoped=true&lang=less&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-post.vue?vue&type=style&index=0&id=66896603&prod&scoped=true&lang=less&\"","/**\r\n * 用户相关的请求模块\r\n */\r\nimport request from '@/api/request' // 导入request.js中的request\r\n\r\nexport const login = data => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/v1_0/authorizations',\r\n    data\r\n  })\r\n}\r\n\r\n/**\r\n * 发送验证码\r\n * 注意：每手机号每分钟1次\r\n */\r\nexport const sendSms = mobile => {\r\n  return request({\r\n    method: 'GET',\r\n    url: `/v1_0/sms/codes/${mobile}`\r\n  })\r\n}\r\n\r\n/**\r\n * 获取用户自己的信息\r\n */\r\nexport const getUserInfo = () => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/user'\r\n    // 发送请求头数据\r\n    // headers: {\r\n    //   // 注意：该接口需要授权才能访问\r\n    //   //       token的数据格式：Bearer token数据，注意 Bearer 后面有个空格\r\n    //   Authorization: `Bearer ${store.state.user.token}`\r\n    // }\r\n  })\r\n}\r\n\r\n/**\r\n * 获取用户频道列表\r\n */\r\nexport const getUserChannels = () => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/user/channels'\r\n  })\r\n}\r\n\r\n/**\r\n * 关注用户\r\n */\r\nexport const addFollow = target => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/v1_0/user/followings',\r\n    data: {\r\n      target\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 取消关注用户\r\n */\r\nexport const deleteFollow = target => {\r\n  return request({\r\n    method: 'DELETE',\r\n    url: `/v1_0/user/followings/${target}`\r\n  })\r\n}\r\n\r\n/**\r\n * 获取当前登录用户的个人资料\r\n */\r\nexport const getUserProfile = target => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/user/profile'\r\n  })\r\n}\r\n\r\n/**\r\n * 更新用户资料\r\n */\r\nexport const updateUserProfile = data => {\r\n  return request({\r\n    method: 'PATCH',\r\n    url: '/v1_0/user/profile',\r\n    data\r\n  })\r\n}\r\n\r\n/**\r\n * 更新用户照片资料\r\n */\r\nexport const updateUserPhoto = data => {\r\n  return request({\r\n    method: 'PATCH',\r\n    url: '/v1_0/user/photo',\r\n    data\r\n  })\r\n}\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment-reply.vue?vue&type=style&index=0&id=fc7ee0b6&prod&scoped=true&lang=less&\""],"sourceRoot":""}